<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Mocha Tests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css" />
  </head>
  <body>
    <div id="mocha"></div>

    <script type="module" src="https://unpkg.com/mocha/mocha.js"></script>
    <script type="module" src="https://unpkg.com/sinon@21/pkg/sinon.js"></script>

    <script type="module" class="mocha-init">

import { assert, config as chaiConfig } from 'https://unpkg.com/chai@5/chai.js';
import { serialize, deserialize } from './lib/main.js';

mocha.setup({
  ui: 'bdd',
  checkLeaks: true,
  asyncOnly: true,
});

chaiConfig.truncateThreshold = 0;

function useRealCrypto() {
  if (window.crypto.subtle.digest?.restore) {
    window.crypto.subtle.digest.restore();
  }
}

function useStubbedCrypto() {
  return sinon.stub(window.crypto.subtle, 'digest');
}

const testNum = '003';

// TEST_SPEC_START
// TEST_SPEC_END

    </script>
    <script type="module" class="mocha-exec">

mocha.run();

    </script>
  </body>
</html>
